{% extends "base/base_template.html" %} {% block content %} {% load static %}
<link rel="stylesheet" href="{% static 'css/kanban_board_css/kanban_board.css' %}" />
<div class="flex justify-center border-b-4 mb-4">
<div class="w-full sm:max-w-lg flex justify-evenly">
   <div class="mdl-card__title mdl-card--expand">
      <div class="mdl-card--border text-xl font-semibold">KANBAN Board</div>
   </div>
<form method="post" action="add-task/" >
{% csrf_token %}
<button type="submit" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--primary" id="tt3">
  <i class="material-icons">add</i>
  </button>
  </form>
<div class="mdl-tooltip mdl-tooltip--left" data-mdl-for="tt3">
<strong>Add new Task</strong>
</div>
</div>
</div>

<div class="flex justify-center">
   <div class="w-full sm:max-w-lg h-5/6">
    

      <div class="topnav flex flex-col items-center">
         <a href="javascript:void(0);" onclick="myFunction('to_do')" class="active w-full">To Do</a>
         <div id="to_do" class="w-full flex-col items-center py-2" style="display: flex">
            {% for todo in toDos %}
            <div class="border-2 border-gray-300 bg-blue-100 w-11/12 rounded-md my-2">
               <form action="" method="post" class="w-full px-4">
                  {% csrf_token %} {{ form.as_p }}
                  <div class="hidden" id="TaskId_{{ todo.id }}"></div>
                     <input class="w-full my-2 disable-input-user text-lg" type="text" name="toDoTitle"
                        id="toDoTitle_{{ todo.id }}" placeholder="Title..." value="{{ todo.title }}" minlength="5" maxlength="50"
                        required disabled />
                     <textarea class="w-full my-2 disable-input-user" name="newTaskDescription" id="toDoDescription_{{ todo.id }}"
                        placeholder="Description..." minlength="10" maxlength="255" required rows="5"
                        disabled>{{ todo.description }}</textarea>

                     <div class="flex justify-evenly items-center my-2 disable-input-user">
                        <label class="w-2/6 disable-input-user" for="prio">Prio:</label>
                        <label class="w-3/6 disable-input-user" id="toDoPrioHidden_{{ todo.id }}" for="prio">{{ todo.prio }}</label>
                        <select class="w-4/6 disable-input-user hidden" name="toDoPrio" id="toDoPrioRemoveHidden_{{ todo.id }}" disabled required>
                           <option value="LOW">Low</option>
                           <option value="MEDIUM">Medium</option>
                           <option value="URGENT">Urgent</option>
                        </select>
                     </div>

                     <div class="flex justify-evenly items-center my-2 disable-input-user">
                        <label class="w-2/6" for="memberType">Area:</label>
                        <label class="w-3/6" id="toDoAreaHidden_{{ todo.id }}" for="memberType">{{ todo.member_type }}</label>
                        <select class="w-4/6 hidden disable-input-user" name="toDoType" id="toDoAreaRemoveHidden_{{ todo.id }}" disable   required>
                           <option value="Frontend">Frontend</option>
                           <option value="Backend">Backend</option>
                           <option value="Ui Ux Design">UI/UX Design</option>
                           <option value="Product Owner">Product Owner</option>
                           <option value="Srum Master">Srum Master</option>
                           <option value="Testing">Testing</option>
                        </select>
                     </div>

                     <div class="flex justify-evenly items-center my-2 disable-input-user">
                        <label class="w-2/6" for="prio">Assigned:</label>
                        <label class="w-3/6" id="toDoAssignedHidden_{{ todo.id }}" for="prio">{{ user.username }}</label>
                        <select class="w-4/6 hidden disable-input-user" name="toDoAssigned" id="toDoAssignedRemoveHidden_{{ todo.id }}">
                           {% for user in users %}
                           <option value={{ user.id }}>{{ user.username }}</option>
                           {% endfor %}
                        </select>
                     </div>

                     <div class="flex justify-evenly items-center my-2 border-solid disable-input-user">
                        <label class="w-2/6" for="status">Status:</label>
                        <label class="w-3/6" id="toDoStatusHidden_{{ todo.id }}" for="status">{{ todo.status }}</label>
                        <select class="w-4/6 hidden disable-input-user" name="toDoStatus" id="toDoStatus"
                           required>
                           <option value="ToDo">ToDo</option>
                           <option value="Working">Working</option>
                           <option value="Waiting">Waiting</option>
                           <option value="Done">Done</option>
                        </select>
                     </div>

                     <div class="flex justify-evenly w-full my-2">
                        <div
                           class="w-48 text-white text-center px-4 py-2 my-2 bg-blue-800 rounded-md hover:cursor-pointer hover:bg-opacity-50"
                           onclick="removeDisableUser()">Edit task</div>
                        <button class="w-48 text-white px-4 py-2 my-2 bg-blue-800 rounded-md hover:bg-opacity-50 hidden" id="toDoSaveTaskButton_{{ todo.id }}"
                           type="submit">Save
                           task</button>
                     </div>
               </form>
            </div>
            {% endfor %}
         
         </div>
      </div>

      <div class="topnav">
         <a href="javascript:void(0);" onclick="myFunction('working')" class="active">Working</a>
         <div id="working" style="display: none">
            <div>CONTENT WORKING</div>
            {% for working in workings %}
            <p>{{ working.title }}</p>
            <p>{{ working.description }}</p>
            <p>{{ working.prio }}</p>
            <p>{{ working.member_type }}</p>
            <p>{{ working.assigned_id }}</p>
            <p>{{ working.status }}</p>
            {% endfor%}
         </div>
      </div>

      <div class="topnav">
         <a href="javascript:void(0);" onclick="myFunction('waiting')" class="active">Waiting</a>
         <div id="waiting" style="display: none">
            <div>CONTENT WAITING</div>
         </div>
      </div>

      <div class="topnav">
         <a href="javascript:void(0);" onclick="myFunction('done')" class="active">Done</a>
         <div id="done" style="display: none">
            <div>CONTENT DONE</div>
         </div>
      </div>
   </div>
</div>
<script>
   function myFunction(content) {
      var x = document.getElementById(content);
      if (x.style.display === "flex") {
         x.style.display = "none";
      } else {
         x.style.display = "flex";
      }
   }

   function removeDisableUser() {
      let elems = document.getElementsByClassName("disable-input-user");
      [].forEach.call(elems, function (el) {
         el.classList.remove("disable-input-user");
      });
   }

   function showInfoCreated(){
      let elem = document.getElementById("infoAddTask");
      elem.classList.remove("hidden");
      elem.classList.add("info-add-task");
   
   }
</script>

{% endblock %}